webpackJsonp([32],{678:function(l,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var t=e(0),u=(e(1),e(17),e(66)),a=e(106),i=e(38),o=e(226),s=e(208),r=function(){function l(l,n,e,t,u,a,i){this.platform=l,this.navCtrl=n,this.modalCtrl=e,this.commonProvider=t,this.storageProvider=u,this.endpointProvider=a,this.afDB=i,this.search="",this.plenary=null,this.allSenators=[],this.senators=[],this.seats=[],this.shadowImage="",this.present=0,this.missing=0,this.backButton(),this.getSeats()}return l.prototype.backButton=function(){var l=this;this.platform.ready().then(function(){l.platform.registerBackButtonAction(function(){l.back()})})},l.prototype.back=function(){this.navCtrl.setRoot("HomePage",{},{animate:!0,direction:"back"})},l.prototype.onCancel=function(){this.search=""},l.prototype.ionViewDidLeave=function(){this.plenary&&this.plenary.unsubscribe()},l.prototype.getSeats=function(){var l=this,n=this.storageProvider.getCache("seats-list");if(n)this.setValues(n),this.getAttendance();else{var e=this.commonProvider.loading();this.endpointProvider.get("seats").subscribe(function(n){e.dismiss(),l.setValues(n.response),l.storageProvider.setCache("seats-list",n.response),l.getAttendance()},function(l){e.dismiss()})}},l.prototype.setValues=function(l){this.allSenators=this.orderArray(l),this.senators=this.allSenators,this.seats=this.allSenators},l.prototype.getAttendance=function(){var l=this;this.plenary=this.afDB.object("plenary").snapshotChanges().subscribe(function(){l.afDB.object("plenary").valueChanges().subscribe(function(n){if(n&&!n.istest){for(var e in l.shadowImage="",l.present=0,l.missing=0,n.assistances)for(var t=0;t<l.allSenators.length;t++)e==l.allSenators[t].firebase_id&&(console.log(n.assistances[e]),n.assistances[e]?(l.present+=1,l.allSenators[t].seat.fill="#3dae55"):(l.missing+=1,l.allSenators[t].seat.fill="#f81d00"));l.setValues(l.allSenators)}})})},l.prototype.goToArea=function(l){this.shadowImage="assets/images/00_"+l+".png",this.senators=this.orderArray(this.allSenators.filter(function(n){return n.seat.sector_id==l}))},l.prototype.orderArray=function(l){return l.sort(function(l,n){return l.fullname>n.fullname?1:n.fullname>l.fullname?-1:0})},l.prototype.showSenator=function(l){this.navCtrl.setRoot("SenatorProfilePage",{from:"SeatsPage",senator:l},{animate:!0,direction:"forward"})},l.prototype.showConventions=function(){var l=this,n=this.modalCtrl.create(o.a);n.onDidDismiss(function(){l.backButton()}),n.present()},l}(),d=(e(480),function(){return function(){}}()),c=e(471),m=e(472),p=e(473),f=e(474),h=e(475),g=e(476),v=e(477),b=e(478),R=e(479),k=e(50),y=e(21),w=e(20),C=e(3),x=e(36),A=e(42),S=e(108),_=e(142),E=e(76),P=e(51),T=e(46),$=e(68),I=e(7),B=e(104),D=e(40),F=e(9),V=e(24),q=e(105),O=e(49),j=e(27),L=e(18),M=e(25),N=e(103),H=e(39),J=e(67),Z=e(26),z=e(6),G=e(11),K=e(30),Q=e(14),U=e(43),W=e(10),X=e(84),Y=t["ɵcrt"]({encapsulation:2,styles:[],data:{}});function ll(l){return t["ɵvid"](0,[(l()(),t["ɵeld"](0,0,null,null,0,":svg:circle",[],[[1,"cx",0],[1,"cy",0],[1,"fill",0],[1,"id",0],[1,"r",0],[1,"transform",0]],null,null,null,null))],null,function(l,n){l(n,0,0,n.context.$implicit.seat.svg.cx,n.context.$implicit.seat.svg.cy,n.context.$implicit.seat.fill,n.context.$implicit.seat.id,n.context.$implicit.seat.svg.r,n.context.$implicit.seat.svg.transform)})}function nl(l){return t["ɵvid"](0,[(l()(),t["ɵeld"](0,0,null,null,19,"button",[["class","item item-block"],["ion-item",""]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.showSenator(l.context.$implicit)&&t);return t},k.b,k.a)),t["ɵdid"](1,1097728,null,3,y.a,[w.a,C.a,t.ElementRef,t.Renderer,[2,x.a]],null,null),t["ɵqud"](335544320,4,{contentLabel:0}),t["ɵqud"](603979776,5,{_buttons:1}),t["ɵqud"](603979776,6,{_icons:1}),t["ɵdid"](5,16384,null,0,A.a,[],null,null),(l()(),t["ɵted"](-1,2,["\n      "])),(l()(),t["ɵeld"](7,0,null,0,5,"ion-avatar",[["item-start",""]],null,null,null,null,null)),t["ɵdid"](8,16384,null,0,S.a,[],null,null),(l()(),t["ɵted"](-1,null,["\n        "])),(l()(),t["ɵeld"](10,0,null,null,1,"img-loader",[["useImg",""]],[[4,"borderColor",null]],null,null,_.b,_.a)),t["ɵdid"](11,114688,null,0,E.a,[t.ElementRef,t.Renderer,P.a,T.a],{src:[0,"src"],spinner:[1,"spinner"],useImg:[2,"useImg"]},null),(l()(),t["ɵted"](-1,null,["\n      "])),(l()(),t["ɵted"](-1,2,["\n      "])),(l()(),t["ɵeld"](14,0,null,2,1,"h2",[],null,null,null,null,null)),(l()(),t["ɵted"](15,null,["",""])),(l()(),t["ɵted"](-1,2,["\n      "])),(l()(),t["ɵeld"](17,0,null,2,1,"p",[],null,null,null,null,null)),(l()(),t["ɵted"](18,null,["",""])),(l()(),t["ɵted"](-1,2,["\n    "]))],function(l,n){l(n,11,0,n.context.$implicit.image,!1,"")},function(l,n){l(n,10,0,n.context.$implicit.seat.fill),l(n,15,0,n.context.$implicit.fullname),l(n,18,0,n.context.$implicit.party.name)})}function el(l){return t["ɵvid"](0,[(l()(),t["ɵeld"](0,0,null,null,43,"ion-header",[],null,null,null,null,null)),t["ɵdid"](1,16384,null,0,$.a,[C.a,t.ElementRef,t.Renderer,[2,I.a]],null,null),(l()(),t["ɵted"](-1,null,["\n  "])),(l()(),t["ɵeld"](3,0,null,null,39,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,B.b,B.a)),t["ɵdid"](4,49152,null,0,D.a,[F.a,[2,I.a],[2,V.a],C.a,t.ElementRef,t.Renderer],null,null),(l()(),t["ɵted"](-1,3,["\n  \t"])),(l()(),t["ɵeld"](6,0,null,1,10,"ion-buttons",[["class","fake-back"],["start",""]],null,null,null,null,null)),t["ɵdid"](7,16384,null,1,q.a,[C.a,t.ElementRef,t.Renderer,[2,O.a],[2,D.a]],null,null),t["ɵqud"](603979776,1,{_buttons:1}),(l()(),t["ɵted"](-1,null,["\n      "])),(l()(),t["ɵeld"](10,0,null,null,5,"button",[["clear",""],["ion-button",""]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.back()&&t);return t},j.b,j.a)),t["ɵdid"](11,1097728,[[1,4]],0,L.a,[[8,""],C.a,t.ElementRef,t.Renderer],{clear:[0,"clear"]},null),(l()(),t["ɵted"](-1,0,["\n        "])),(l()(),t["ɵeld"](13,0,null,0,1,"ion-icon",[["class","icon-flecha3"],["name","menu"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t["ɵdid"](14,147456,null,0,M.a,[C.a,t.ElementRef,t.Renderer],{name:[0,"name"]},null),(l()(),t["ɵted"](-1,0,["\n      "])),(l()(),t["ɵted"](-1,null,["\n    "])),(l()(),t["ɵted"](-1,3,["\n    \n    "])),(l()(),t["ɵeld"](18,0,null,0,11,"button",[["ion-button",""],["menuToggle",""]],[[8,"hidden",0]],[[null,"click"]],function(l,n,e){var u=!0;"click"===n&&(u=!1!==t["ɵnov"](l,20).toggle()&&u);return u},j.b,j.a)),t["ɵdid"](19,1097728,[[2,4]],0,L.a,[[8,""],C.a,t.ElementRef,t.Renderer],null,null),t["ɵdid"](20,1064960,null,0,N.a,[H.a,[2,I.a],[2,L.a],[2,D.a]],{menuToggle:[0,"menuToggle"]},null),t["ɵdid"](21,16384,null,1,q.a,[C.a,t.ElementRef,t.Renderer,[2,O.a],[2,D.a]],null,null),t["ɵqud"](603979776,2,{_buttons:1}),(l()(),t["ɵted"](-1,0,["\n      "])),(l()(),t["ɵeld"](24,0,null,0,1,"ion-icon",[["class","icon-hamburguesa"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t["ɵdid"](25,147456,null,0,M.a,[C.a,t.ElementRef,t.Renderer],null,null),(l()(),t["ɵted"](-1,0,["\n      "])),(l()(),t["ɵeld"](27,0,null,0,1,"span",[["class","title"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["Asistencia"])),(l()(),t["ɵted"](-1,0,["\n    "])),(l()(),t["ɵted"](-1,3,["\n\n    "])),(l()(),t["ɵeld"](31,0,null,2,10,"ion-buttons",[["end",""]],null,null,null,null,null)),t["ɵdid"](32,16384,null,1,q.a,[C.a,t.ElementRef,t.Renderer,[2,O.a],[2,D.a]],null,null),t["ɵqud"](603979776,3,{_buttons:1}),(l()(),t["ɵted"](-1,null,["\n      "])),(l()(),t["ɵeld"](35,0,null,null,5,"button",[["icon-only",""],["ion-button",""]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.showConventions()&&t);return t},j.b,j.a)),t["ɵdid"](36,1097728,[[3,4]],0,L.a,[[8,""],C.a,t.ElementRef,t.Renderer],null,null),(l()(),t["ɵted"](-1,0,["\n        "])),(l()(),t["ɵeld"](38,0,null,0,1,"ion-icon",[["class","icon-info"],["role","img"]],[[2,"hide",null]],null,null,null,null)),t["ɵdid"](39,147456,null,0,M.a,[C.a,t.ElementRef,t.Renderer],null,null),(l()(),t["ɵted"](-1,0,["\n      "])),(l()(),t["ɵted"](-1,null,["\n    "])),(l()(),t["ɵted"](-1,3,["\n  "])),(l()(),t["ɵted"](-1,null,["\n"])),(l()(),t["ɵted"](-1,null,["\n\n"])),(l()(),t["ɵeld"](45,0,null,null,59,"ion-content",[["no-bounce",""]],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,J.b,J.a)),t["ɵdid"](46,4374528,null,0,Z.a,[C.a,z.a,G.a,t.ElementRef,t.Renderer,F.a,K.a,t.NgZone,[2,I.a],[2,V.a]],null,null),(l()(),t["ɵted"](-1,1,["\n  "])),(l()(),t["ɵeld"](48,0,null,1,48,"div",[["class","p-fixed"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["  \n    "])),(l()(),t["ɵeld"](50,0,null,null,1,"p",[["class","subtitle-map"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["Seleccione un sector"])),(l()(),t["ɵted"](-1,null,["\n    "])),(l()(),t["ɵeld"](53,0,null,null,30,"div",[["class","svg-container"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["\n      \n      "])),(l()(),t["ɵeld"](55,0,null,null,0,"img",[["id","shadow"]],[[8,"src",4]],null,null,null,null)),(l()(),t["ɵted"](-1,null,["\n      "])),(l()(),t["ɵeld"](57,0,null,null,0,"img",[["id","sectors"],["src","assets/images/0.png"],["usemap","#map"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["\n      "])),(l()(),t["ɵeld"](59,0,null,null,11,"map",[["name","map"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["\n        "])),(l()(),t["ɵeld"](61,0,null,null,0,"area",[["coords","123,190,84,235,0,235,0,84"],["shape","poly"]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.goToArea(1)&&t);return t},null,null)),(l()(),t["ɵted"](-1,null,["\n        "])),(l()(),t["ɵeld"](63,0,null,null,0,"area",[["coords","123,189,166,162,166,0,0,0,0,83"],["shape","poly"]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.goToArea(2)&&t);return t},null,null)),(l()(),t["ɵted"](-1,null,["\n        "])),(l()(),t["ɵeld"](65,0,null,null,0,"area",[["coords","167,162,213,187,330,85,330,1,167,0"],["shape","poly"]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.goToArea(3)&&t);return t},null,null)),(l()(),t["ɵted"](-1,null,["\n        "])),(l()(),t["ɵeld"](67,0,null,null,0,"area",[["coords","213,188,254,235,331,235,331,85"],["shape","poly"]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.goToArea(4)&&t);return t},null,null)),(l()(),t["ɵted"](-1,null,["\n        "])),(l()(),t["ɵeld"](69,0,null,null,0,"area",[["coords","98,176,205,214"],["shape","rect"]],null,[[null,"click"]],function(l,n,e){var t=!0;"click"===n&&(t=!1!==l.component.goToArea(5)&&t);return t},null,null)),(l()(),t["ɵted"](-1,null,["\n      "])),(l()(),t["ɵted"](-1,null,["\n    \n      "])),(l()(),t["ɵeld"](72,0,null,null,10,":svg:svg",[[":xmlns:xlink","http://www.w3.org/1999/xlink"],["version","1.1"],["viewBox","0 0 5631 3896"],["xmlns","http://www.w3.org/2000/svg"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["\n          "])),(l()(),t["ɵeld"](74,0,null,null,7,":svg:g",[["fill","none"],["fill-rule","evenodd"],["stroke","none"],["stroke-width","1"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["\n              "])),(l()(),t["ɵeld"](76,0,null,null,4,":svg:g",[["id","seats"],["transform","translate(-31.000000, -25.000000)"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["\n                  "])),(l()(),t["ɵand"](16777216,null,null,1,null,ll)),t["ɵdid"](79,802816,null,0,Q.i,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["ɵted"](-1,null,["\n              "])),(l()(),t["ɵted"](-1,null,["\n          "])),(l()(),t["ɵted"](-1,null,["\n      "])),(l()(),t["ɵted"](-1,null,["\n    "])),(l()(),t["ɵted"](-1,null,["\n\n    "])),(l()(),t["ɵeld"](85,0,null,null,4,"div",[["class","num-assistants"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["\n        "])),(l()(),t["ɵeld"](87,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t["ɵted"](88,null,["Presentes: ",""])),(l()(),t["ɵted"](-1,null,["\n    "])),(l()(),t["ɵted"](-1,null,["\n    "])),(l()(),t["ɵeld"](91,0,null,null,4,"div",[["class","num-missing"]],null,null,null,null,null)),(l()(),t["ɵted"](-1,null,["\n       "])),(l()(),t["ɵeld"](93,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),t["ɵted"](94,null,["Ausentes: ",""])),(l()(),t["ɵted"](-1,null,["\n    "])),(l()(),t["ɵted"](-1,null,["\n  "])),(l()(),t["ɵted"](-1,1,["\n\n  "])),(l()(),t["ɵeld"](98,0,null,1,5,"ion-list",[["class","list-borders"],["no-lines",""]],null,null,null,null,null)),t["ɵdid"](99,16384,null,0,U.a,[C.a,t.ElementRef,t.Renderer,z.a,W.l,G.a],null,null),(l()(),t["ɵted"](-1,null,["\n\n    "])),(l()(),t["ɵand"](16777216,null,null,1,null,nl)),t["ɵdid"](102,802816,null,0,Q.i,[t.ViewContainerRef,t.TemplateRef,t.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(l()(),t["ɵted"](-1,null,[" \n   \n  "])),(l()(),t["ɵted"](-1,1,["\n"])),(l()(),t["ɵted"](-1,null,["\n"]))],function(l,n){var e=n.component;l(n,11,0,"");l(n,14,0,"menu");l(n,20,0,""),l(n,79,0,e.seats),l(n,102,0,e.senators)},function(l,n){var e=n.component;l(n,3,0,t["ɵnov"](n,4)._hidden,t["ɵnov"](n,4)._sbPadding),l(n,13,0,t["ɵnov"](n,14)._hidden),l(n,18,0,t["ɵnov"](n,20).isHidden),l(n,24,0,t["ɵnov"](n,25)._hidden),l(n,38,0,t["ɵnov"](n,39)._hidden),l(n,45,0,t["ɵnov"](n,46).statusbarPadding,t["ɵnov"](n,46)._hasRefresher),l(n,55,0,e.shadowImage),l(n,88,0,e.present),l(n,94,0,e.missing)})}var tl=t["ɵccf"]("page-attendance",r,function(l){return t["ɵvid"](0,[(l()(),t["ɵeld"](0,0,null,null,1,"page-attendance",[],null,null,null,el,Y)),t["ɵdid"](1,49152,null,0,r,[z.a,V.a,X.a,i.a,a.a,u.a,s.a],null,null)],null,null)},{},{},[]),ul=e(23),al=e(206),il=e(209),ol=e(75);e.d(n,"AttendancePageModuleNgFactory",function(){return sl});var sl=t["ɵcmf"](d,[],function(l){return t["ɵmod"]([t["ɵmpd"](512,t.ComponentFactoryResolver,t["ɵCodegenComponentFactoryResolver"],[[8,[c.a,m.a,p.a,f.a,h.a,g.a,v.a,b.a,R.a,tl]],[3,t.ComponentFactoryResolver],t.NgModuleRef]),t["ɵmpd"](4608,Q.l,Q.k,[t.LOCALE_ID,[2,Q.v]]),t["ɵmpd"](4608,ul.k,ul.k,[]),t["ɵmpd"](4608,ul.c,ul.c,[]),t["ɵmpd"](512,Q.b,Q.b,[]),t["ɵmpd"](512,ul.j,ul.j,[]),t["ɵmpd"](512,ul.d,ul.d,[]),t["ɵmpd"](512,ul.i,ul.i,[]),t["ɵmpd"](512,al.a,al.a,[]),t["ɵmpd"](512,al.b,al.b,[]),t["ɵmpd"](512,il.a,il.a,[]),t["ɵmpd"](512,d,d,[]),t["ɵmpd"](256,ol.a,r,[])])})}});